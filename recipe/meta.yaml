{% set name = "absolv" %}
{% set version = "0.0.1" %}

package:
  name: {{ name|lower }}-split
  version: {{ version }}

source:
  url: https://github.com/SimonBoothroyd/{{ name }}/archive/{{ version }}.tar.gz
  sha256: c187b1e5bd115af03beb39131534ff6ace6228e8f1720118fa0a04a250db387e

build:
  number: 1

outputs:
  - name: {{ name|lower }}-base
    script: build_base.sh
    build:
      noarch: python

    requirements:
      host:
        - python >=3.8
        - pip
      run:
        - python >=3.8
        - pydantic
        - tqdm

        - openff-toolkit-base >=0.9.2
        - openff-utilities

        - openmm >=7.6
        - openmmtools >=0.20.3

        - packmol
        - pymbar

    test:
      imports:
        - absolv

  - name: {{ name|lower }}
    build:
      noarch: python

    requirements:
      host:
        - python >=3.8
      run:
        - python >=3.8
        - rdkit
        - ambertools
        - {{ pin_subpackage('absolv-base', exact=True) }}

    test:
      imports:
        - absolv

about:
  home: https://github.com/SimonBoothroyd/absolv
  license: MIT
  license_family: MIT
  license_file: LICENSE
  summary: Absolute solvation free energy calculations with OpenFF and OpenMM
  description: |
    A framework that aims to offer a simple API for computing the change in free energy when transferring
    a solute from one solvent to another, or to vacuum in the case of solvation free energy calculations.
  doc_url: https://github.com/SimonBoothroyd/absolv
  dev_url: https://github.com/SimonBoothroyd/absolv

extra:
  recipe-maintainers:
    - simonboothroyd
